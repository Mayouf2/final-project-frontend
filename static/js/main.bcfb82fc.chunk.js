(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{259:function(e,t,c){},287:function(e,t,c){},288:function(e,t,c){},289:function(e,t,c){},290:function(e,t,c){},291:function(e,t,c){},292:function(e,t,c){},318:function(e,t,c){},320:function(e,t,c){},491:function(e,t,c){},492:function(e,t,c){},497:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(106),r=c.n(s),o=c(4),i=c(7),j=c(14),u=c(36),b=c(11),l=c(5),d=c.n(l),h=(c(259),c(6)),O=c.n(h),p=c(51),m=c.n(p),f=c(50),x=c(2);function v(e){var t=e.token,c=Object(a.useState)([]),n=Object(o.a)(c,2),s=n[0],r=n[1],l=Object(a.useState)([]),h=Object(o.a)(l,2),p=h[0],v=h[1],g=Object(a.useState)(0),k=Object(o.a)(g,2),N=k[0],w=k[1],S=Object(a.useState)([]),y=Object(o.a)(S,2),C=y[0],B=y[1],z=Object(a.useState)(""),E=Object(o.a)(z,2),I=E[0],R=E[1],_=Object(a.useState)(""),L=Object(o.a)(_,2),D=L[0],A=L[1],H=Object(a.useState)(""),U=Object(o.a)(H,2),T=U[0],M=U[1],P=Object(a.useState)(""),F=Object(o.a)(P,2),J=F[0],q=F[1],K=Object(a.useState)(""),Q=Object(o.a)(K,2),W=Q[0],Y=Q[1],G=Object(a.useState)([]),V=Object(o.a)(G,2),X=(V[0],V[1],Object(a.useState)(!1)),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)([]),ce=Object(o.a)(te,2),ae=ce[0],ne=ce[1];Object(j.f)().id;Object(a.useEffect)(Object(b.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,O.a.get("".concat("https://readers-backend.herokuapp.com","/like"),{headers:{authorization:"Bearer "+t}});case 3:c=e.sent,v(c.data);case 5:case"end":return e.stop()}}),e)}))),[p]),Object(a.useEffect)((function(){O.a.get("".concat("https://readers-backend.herokuapp.com","/user"),{headers:{authorization:"Bearer "+t}}).then((function(e){ne(e.data)})).catch((function(e){console.log(e)}))}),[ae]);Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat("https://readers-backend.herokuapp.com","/posts"),{headers:{authorization:"Bearer "+t}}).then((function(e){B(e.data)})).catch((function(e){console.log(e,"err")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[C]),Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat("https://readers-backend.herokuapp.com","/getbook"),{headers:{authorization:"Bearer "+t}}).then((function(e){r(e.data)})).catch((function(e){console.log(e,"err")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var se=function(){var e=Object(b.a)(d.a.mark((function e(){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T||J){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,O.a.post("".concat("https://readers-backend.herokuapp.com","/posts"),{desc:T,img:J,bookTitle:I,auther:D,rating:N,url:W},{headers:{authorization:"Bearer "+t}});case 4:c=e.sent,(a=Object(u.a)(C)).push(c.data),B(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(b.a)(d.a.mark((function e(c,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat("https://readers-backend.herokuapp.com","/posts/").concat(c),{headers:{authorization:"Bearer "+t}});case 2:e.sent,(n=Object(u.a)(C)).splice(a,1),B(n),console.log(n);case 7:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),oe=function(e){console.log(e)},ie=(Object.values(C),s[Math.floor(Math.random()*s.length)],Object(x.jsxs)("div",{className:"formbox1",children:[Object(x.jsx)("h1",{children:"Review a book"}),Object(x.jsxs)("form",{id:"form",children:[Object(x.jsx)("label",{for:"",children:"Title"}),Object(x.jsx)("input",{type:"text",className:"asd",placeholder:"Title",onChange:function(e){!function(e){R(e.target.value)}(e)}}),Object(x.jsx)("label",{for:"",children:"Auther"}),Object(x.jsx)("input",{type:"text",className:"asd",placeholder:"Auther",onChange:function(e){!function(e){A(e.target.value)}(e)}}),Object(x.jsx)("label",{for:"",children:"Image"}),Object(x.jsx)("input",{type:"text",className:"asd",placeholder:"image",onChange:function(e){!function(e){q(e.target.value)}(e)}}),Object(x.jsx)("label",{for:"",children:"Link"}),Object(x.jsx)("input",{type:"text",className:"asd",placeholder:"book link",onChange:function(e){!function(e){Y(e.target.value)}(e)}}),Object(x.jsx)("label",{for:"",children:"Review"})," ",Object(x.jsx)("br",{}),Object(x.jsx)("textarea",{name:"",id:"",cols:"38",rows:"3",placeholder:"Review",onChange:function(e){!function(e){M(e.target.value)}(e)}})," ",Object(x.jsx)("br",{}),Object(x.jsx)("label",{for:"",children:"Rating"}),Object(x.jsxs)("select",{id:"cars",name:"cars",onChange:function(e){!function(e){w(e.target.value)}(e)},children:[Object(x.jsx)("option",{value:"0",children:"Rate:"}),Object(x.jsx)("option",{children:"1"}),Object(x.jsx)("option",{children:"2"}),Object(x.jsx)("option",{children:"3"}),Object(x.jsx)("option",{children:"4"}),Object(x.jsx)("option",{children:"5"})]})," ",Object(x.jsx)("br",{}),Object(x.jsx)("button",{type:"button",className:"addButton",onClick:function(){se(),ee(!1)},children:"Add"})]})]}));return Object(x.jsx)("div",{className:"whole",children:Object(x.jsxs)("div",{className:"mainHome",children:[Object(x.jsxs)("div",{className:"leftSide",children:[Object(x.jsx)("h2",{children:"WANT TO READ"}),p.map((function(e,t){return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"favHome",children:[Object(x.jsx)(i.b,{to:"/book/".concat(e._id),children:Object(x.jsx)("img",{className:"HomeImg",src:e.img,alt:""})}),Object(x.jsxs)("div",{className:"bookName",children:[Object(x.jsx)("span",{children:e.name})," "," ",Object(x.jsxs)("span",{children:["By: ",e.auther]}),"  "," "," ",Object(x.jsx)("br",{}),Object(x.jsx)(m.a,{count:5,size:24,value:e.rating,activeColor:"#ffd700"})]})]})},t)}))]}),Object(x.jsxs)("div",{className:"rightSide",children:[Object(x.jsx)("h2",{children:"Reviews"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{className:"review",onClick:function(){ee(!$)},children:"Review a book"}),$?ie:""]}),C&&C.map((function(e,t){return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"HomePosts",children:[Object(x.jsx)("img",{className:"HomebookImg",src:e.img,alt:""}),e.user&&Object(x.jsx)("img",{src:e.user.img,alt:"",className:"HomeIgm"}),e.user&&Object(x.jsx)("span",{className:"HomeUserInfo",children:e.user.name}),Object(x.jsx)("h4",{className:"HomeBookInfo",children:e.bookTitle}),Object(x.jsxs)("p",{className:"HomeBookInfo",children:["By: ",e.auther]}),Object(x.jsx)("div",{className:"stars",children:Object(x.jsx)(m.a,{count:5,onChange:oe,size:20,value:e.rating,activeColor:"#ffd700"})}),Object(x.jsx)("a",{href:e.url,target:"_blank",className:"url",children:"want to read?"}),Object(x.jsx)("h3",{className:"HomeDesc",children:e.desc}),Object(x.jsx)(i.b,{to:"/Chat/".concat(e.user._id,"/").concat(e.user.name),children:Object(x.jsx)("span",{className:"discussion",children:"discuss ?"})}),Object(x.jsx)("p",{className:"time",children:e.time}),Object(x.jsx)("div",{children:Object(x.jsx)("p",{})}),Object(x.jsxs)("div",{className:"HomeLikeButton",children:[Object(x.jsx)("h6",{className:"hide"}),Object(x.jsx)(f.a,{className:"deletePostButton",onClick:function(){re(e._id)}})]})]})},t)}))]})," ",Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{}),Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{}),Object(x.jsxs)("div",{className:"center",children:[Object(x.jsx)("h1",{children:"Recommendation"}),s.map((function(e){return Object(x.jsxs)("div",{className:"RecHome",children:[Object(x.jsx)(i.b,{to:"/book/".concat(e._id),children:Object(x.jsx)("img",{className:"RecbookImg",src:e.img,alt:""})}),Object(x.jsxs)("span",{className:"nameRec",children:[e.name," "]}),"  ",Object(x.jsx)("br",{})," ",Object(x.jsxs)("p",{className:"autherRec",children:["By: ",e.auther]})," ",Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"Recstars",children:Object(x.jsx)(m.a,{count:5,onChange:oe,size:20,value:e.rating,activeColor:"#ffd700"})}),Object(x.jsx)("a",{href:e.url,target:"_blank",className:"Recurl",children:"want to read?"})]})}))]})]})})}c(287);var g=c(155);function k(e){var t=e.token,c=Object(a.useState)([]),n=Object(o.a)(c,2),s=n[0],r=n[1],l=Object(a.useState)(""),h=Object(o.a)(l,2),p=h[0],v=h[1],k=Object(a.useState)([]),N=Object(o.a)(k,2),w=N[0],S=N[1],y=Object(a.useState)(0),C=Object(o.a)(y,2),B=(C[0],C[1]),z=Object(a.useState)([]),E=Object(o.a)(z,2),I=E[0],R=E[1];Object(j.f)().id;Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat("https://readers-backend.herokuapp.com","/books"),{headers:{authorization:"Bearer "+t}}).then((function(e){r(e.data)})).catch((function(e){console.log(e,"err")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(a.useEffect)((function(){O.a.get("".concat("https://readers-backend.herokuapp.com","/user"),{headers:{authorization:"Bearer "+t}}).then((function(e){R(e.data)})).catch((function(e){console.log(e)}))}),[I]),Object(a.useEffect)(Object(b.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,O.a.get("".concat("https://readers-backend.herokuapp.com","/like"),{headers:{authorization:"Bearer "+t}});case 3:c=e.sent,S(c.data);case 5:case"end":return e.stop()}}),e)}))),[w]);var _=function(){var e=Object(b.a)(d.a.mark((function e(c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("".concat("https://readers-backend.herokuapp.com","/like/").concat(c),{},{headers:{authorization:"Bearer "+t}});case 2:a=e.sent,console.log(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(d.a.mark((function e(c,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat("https://readers-backend.herokuapp.com","/like/").concat(c),{headers:{authorization:"Bearer "+t}});case 2:n=e.sent,console.log(n.data),S(n);case 5:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),D=function(e){B(e)},A=function(){var e=Object(b.a)(d.a.mark((function e(c,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat("https://readers-backend.herokuapp.com","/book/").concat(c),{headers:{authorization:"Bearer "+t}});case 2:e.sent,(n=Object(u.a)(s)).splice(a,1),r(n);case 6:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"sreachDiv",children:Object(x.jsx)("input",{id:"inputSearch",type:"text",placeholder:"  search",onChange:function(e){!function(e){v(e.target.value)}(e)}})}),Object(x.jsx)("div",{className:"booksMain",children:s.filter((function(e){return""===p||e.name.toLowerCase().includes(p.toLowerCase())?e:void 0})).map((function(e,t){for(var c=function(t){if(w[t]._id===e._id)return{v:Object(x.jsxs)("div",{className:"books",children:[Object(x.jsx)(i.b,{to:"/book/".concat(e._id),children:Object(x.jsx)("img",{className:"bookImg",src:e.img,alt:""})}),Object(x.jsx)("h3",{children:e.name}),Object(x.jsxs)("p",{children:["By: ",e.auther]}),Object(x.jsx)(m.a,{count:5,onChange:D,size:24,value:e.rating,activeColor:"#ffd700"}),Object(x.jsx)(g.a,{size:20,style:{color:"green"},onClick:function(){L(e._id)}}),1==I.admin?Object(x.jsx)(f.a,{onClick:function(){A(e._id,t)}}):Object(x.jsx)("p",{})]})}},a=0;a<w.length;a++){var n=c(a);if("object"===typeof n)return n.v}return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"books",children:[Object(x.jsx)(i.b,{to:"/book/".concat(e._id),children:Object(x.jsx)("img",{className:"bookImg",src:e.img,alt:""})}),Object(x.jsx)("h3",{children:e.name}),Object(x.jsxs)("p",{children:["By: ",e.auther]}),Object(x.jsx)(m.a,{count:5,onChange:D,size:24,value:e.rating,activeColor:"#ffd700"}),Object(x.jsx)(g.a,{size:20,style:{color:"black"},onClick:function(){_(e._id)}}),1==I.admin?Object(x.jsx)(f.a,{onClick:function(){A(e._id,t)}}):Object(x.jsx)("p",{})]})},t)}))})]})}c(288);function N(e){var t=e.token,c=Object(a.useState)([]),n=Object(o.a)(c,2),s=n[0],r=n[1];Object(j.f)().id;Object(a.useEffect)(Object(b.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,O.a.get("".concat("https://readers-backend.herokuapp.com","/like"),{headers:{authorization:"Bearer "+t}});case 3:c=e.sent,r(c.data);case 5:case"end":return e.stop()}}),e)}))),[s]);var l=function(){var e=Object(b.a)(d.a.mark((function e(c,a){var n,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat("https://readers-backend.herokuapp.com","/like/").concat(c),{headers:{authorization:"Bearer "+t}});case 2:n=e.sent,console.log(n.data),(o=Object(u.a)(s)).splice(a,1),r(o);case 7:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:"favMain",children:s.map((function(e,t){return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"fav",children:[Object(x.jsx)(i.b,{to:"/book/".concat(e._id),children:Object(x.jsx)("img",{className:"FavImg",src:e.img,alt:""})}),Object(x.jsx)("span",{className:"info",children:e.name})," "," ",Object(x.jsxs)("p",{className:"auther",children:["By: ",e.auther]}),"  "," ",Object(x.jsx)("button",{className:"deleteFav",onClick:function(){l(e._id)},children:Object(x.jsx)(f.a,{})})]})},t)}))})})}c(289);function w(e){var t=e.setToken,c=Object(a.useState)(""),n=Object(o.a)(c,2),s=n[0],r=n[1],u=Object(a.useState)(""),l=Object(o.a)(u,2),h=l[0],p=l[1],m=Object(j.e)(),f=function(){var e=Object(b.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""!==s&&""!==h||alert("Email and Password is required!!"),e.prev=1,e.next=4,O.a.post("".concat("https://readers-backend.herokuapp.com","/login"),{email:s,password:h});case 4:c=e.sent,t(c.data.token),200==c.status&&m.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:"loginDiv",children:Object(x.jsxs)("div",{className:"formbox2",children:[Object(x.jsx)("h3",{children:"Log In"}),Object(x.jsxs)("form",{id:"form",action:"",method:"post",children:[Object(x.jsx)("label",{for:"",children:"Email"}),Object(x.jsx)("input",{type:"text",name:"username",placeholder:"Enter your Email",onChange:function(e){!function(e){r(e.target.value)}(e)},className:"asd"}),Object(x.jsx)("label",{for:"",children:"Password"}),Object(x.jsx)("input",{type:"password",placeholder:"Enter your Password",onChange:function(e){!function(e){p(e.target.value)}(e)},id:"",name:"password",className:"asd"}),Object(x.jsx)(i.b,{to:"/Login",children:Object(x.jsx)("input",{id:"btn",type:"submit",name:"submit",value:"Log In",onClick:function(){f()},className:"mainbox2"})}),Object(x.jsx)("label",{for:"",children:"New ?"}),Object(x.jsx)(i.b,{to:"/SignUp",children:Object(x.jsx)("button",{className:"mainbox2",children:"Register Now"})})]})]})})})}var S=c(62);c(290);function y(e){var t,c=e.token,n=e.setToken,s=Object(a.useState)([]),r=Object(o.a)(s,2),u=r[0],b=r[1];Object(j.f)().id;return Object(a.useEffect)((function(){O.a.get("".concat("https://readers-backend.herokuapp.com","/user"),{headers:{authorization:"Bearer "+c}}).then((function(e){b(e.data)})).catch((function(e){console.log(e)}))}),[u,c]),Object(x.jsx)("div",{children:c?Object(x.jsxs)("div",{className:"navitems",children:[Object(x.jsxs)("div",{className:"brand",children:[Object(x.jsx)("img",{className:"logo",src:"https://www.thesecret.tv/wp-content/uploads/2020/04/icon-books-578x384.png"}),Object(x.jsx)("h1",{className:"title",children:"Readers"})]}),Object(x.jsxs)(i.b,{id:"navLink",to:"/",children:["Home"," "]}),Object(x.jsx)(i.b,{id:"navLink",to:"/Books",children:"Books"}),Object(x.jsx)(i.b,{id:"navLink",to:"/Favorite",children:"My books"}),Object(x.jsxs)("div",{class:"dropdown",children:[Object(x.jsx)("img",{className:"accountImg",src:u.img,alt:""}),Object(x.jsx)("span",{children:u.name}),Object(x.jsxs)("div",{class:"dropdown-content",children:[Object(x.jsx)(i.b,{className:"dro",to:"/Profile",children:"Profile"}),1==u.admin?Object(x.jsx)(i.b,{className:"dro",to:"/AddBook",children:"Admin dashboard"}):Object(x.jsx)("h1",{children:" "}),Object(x.jsx)(i.b,(t={className:"dro"},Object(S.a)(t,"className","link"),Object(S.a)(t,"to","/login"),Object(S.a)(t,"onClick",(function(){n("")})),Object(S.a)(t,"children","Log out"),t))]})]})]}):Object(x.jsxs)("div",{className:"navitems",children:[Object(x.jsxs)("div",{className:"brand",children:[Object(x.jsx)("img",{className:"logo",src:"https://www.thesecret.tv/wp-content/uploads/2020/04/icon-books-578x384.png"}),Object(x.jsx)("h1",{className:"title",children:"Readers"})]}),Object(x.jsx)(i.b,{id:"navLink",to:"/",children:"Home"}),Object(x.jsx)(i.b,{id:"navLink",to:"/Books",children:"Books"}),Object(x.jsx)(i.b,{id:"navLink",to:"/Login",children:"Login"}),Object(x.jsx)(i.b,{id:"navLink",to:"/SignUp",children:"SignUp"})]})})}c(291);function C(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(""),r=Object(o.a)(s,2),i=r[0],u=r[1],l=Object(a.useState)(""),h=Object(o.a)(l,2),p=h[0],m=h[1],f=Object(j.e)(),v=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""!==i&&""!==p&&""!==c||(alert("Email, Password and Name is required!"),f.push("/SignUp")),console.log({name:c,email:i,password:p}),e.next=4,O.a.post("".concat("https://readers-backend.herokuapp.com","/signUp"),{name:c,email:i,password:p});case 4:201===e.sent.status&&f.push("/login");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"loginDiv",children:Object(x.jsxs)("div",{className:"formbox3",children:[Object(x.jsx)("h3",{children:"Sign Up"}),Object(x.jsxs)("form",{id:"form",children:[Object(x.jsx)("label",{for:"",children:"Name"}),Object(x.jsx)("input",{className:"asd",onChange:function(e){!function(e){n(e.target.value)}(e)},placeholder:"enter your name"}),Object(x.jsx)("label",{for:"",children:"Email"}),Object(x.jsx)("input",{className:"asd",onChange:function(e){!function(e){u(e.target.value)}(e)},placeholder:"enter your email"}),Object(x.jsx)("label",{for:"",children:"Password"}),Object(x.jsx)("input",{className:"asd",onChange:function(e){!function(e){m(e.target.value)}(e)},type:"password",placeholder:"enter your password"}),Object(x.jsx)("button",{type:"button",id:"btn",className:"mainbox3",onClick:function(){v()},children:"sign up"})]})]})})}var B=c(58),z=(c(292),c(293),c(296),c(236));c(498);function E(e){var t=e.token,c=Object(a.useState)(null),n=Object(o.a)(c,2),s=n[0],r=n[1],i=Object(j.f)().id,u=Object(a.useState)(""),l=Object(o.a)(u,2),h=l[0],p=l[1],v=Object(a.useState)([]),g=Object(o.a)(v,2),k=(g[0],g[1]),N=Object(a.useState)(0),w=Object(o.a)(N,2),S=(w[0],w[1]);Object(a.useEffect)(Object(b.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,O.a.get("".concat("https://readers-backend.herokuapp.com","/book/").concat(i),{headers:{authorization:"Bearer "+t}});case 3:c=e.sent,r(c.data);case 5:case"end":return e.stop()}}),e)}))),[s]),Object(a.useEffect)(Object(b.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat("https://readers-backend.herokuapp.com","/comment"),{headers:{authorization:"Bearer "+t}});case 2:c=e.sent,k(c.data);case 4:case"end":return e.stop()}}),e)}))),[]);var y=function(){var e=Object(b.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("".concat("https://readers-backend.herokuapp.com","/comment/").concat(i),{comment:h},{headers:{authorization:"Bearer "+t}});case 3:c=e.sent,r(Object(B.a)(Object(B.a)({},s),{},{comment:c.data.comment})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(d.a.mark((function e(c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.put("".concat("https://readers-backend.herokuapp.com","/comment/").concat(i),{comment:c},{headers:{authorization:"Bearer "+t}});case 3:a=e.sent,r(Object(B.a)(Object(B.a)({},s),{},{comment:a.data.comment})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.res.data,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{children:s?Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"onebookmain",children:[Object(x.jsxs)("div",{className:"book",children:[Object(x.jsx)("img",{className:"bookImg",src:s.img,alt:""}),Object(x.jsx)("a",{className:"href",href:s.url,target:"_blank",children:"want to read?"})]}),Object(x.jsxs)("div",{className:"description",children:[Object(x.jsx)("h3",{children:s.name}),Object(x.jsxs)("p",{children:["By: ",s.auther]})," ",Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:s.description}),Object(x.jsx)(m.a,{count:5,onChange:function(e){S(e)},size:24,value:s.rating,activeColor:"#ffd700"})]})]}),Object(x.jsxs)("div",{className:"comments",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){!function(e){p(e.target.value)}(e)}}),Object(x.jsx)("button",{onClick:function(){y()},children:"comment"})]}),Object(x.jsx)("h1",{children:s.comment&&s.comment.map((function(e,t){return Object(x.jsxs)("div",{className:"singleComment",children:[Object(x.jsxs)("p",{children:[" ",e.userName,":"]}),Object(x.jsx)("p",{children:Object(z.a)(e.comment)}),Object(x.jsx)("p",{children:e.rating}),Object(x.jsxs)("button",{className:"deletecommentButton",onClick:function(){C(e.comment)},children:[Object(x.jsx)(f.a,{})," "]})]},t)}))}),Object(x.jsx)("div",{})]})]}):""})}c(318);var I=c(82),R=c.n(I),_=(c(499),Object(I.initializeApp)({apiKey:"AIzaSyDgejwbDLos-S3QbsJe37RMDYNog6xBRwM",authDomain:"upload-img-89628.firebaseapp.com",projectId:"upload-img-89628",storageBucket:"upload-img-89628.appspot.com",messagingSenderId:"789140862794",appId:"1:789140862794:web:fcad7bf735363f3cfdb3b3"}),R.a.storage());function L(e){var t=e.token,c=e.setToken,n=Object(a.useState)([]),s=Object(o.a)(n,2),r=s[0],i=s[1],u=Object(j.e)(),l=Object(a.useState)(""),h=Object(o.a)(l,2),p=h[0],m=h[1],f=Object(a.useState)(""),v=Object(o.a)(f,2),g=(v[0],v[1],Object(a.useState)("")),k=Object(o.a)(g,2),N=(k[0],k[1],Object(a.useState)(null)),w=Object(o.a)(N,2),S=w[0],y=w[1],C=Object(a.useState)(""),B=Object(o.a)(C,2),z=B[0],E=B[1],I=Object(a.useState)(""),R=Object(o.a)(I,2),L=R[0],D=R[1],A=Object(a.useState)(0),H=Object(o.a)(A,2),U=H[0],T=H[1],M=Object(a.useState)(!1),P=Object(o.a)(M,2),F=P[0],J=P[1];Object(a.useEffect)((function(){O.a.get("".concat("https://readers-backend.herokuapp.com","/user"),{headers:{authorization:"Bearer "+t}}).then((function(e){i(e.data)})).catch((function(e){console.log(e)}))}),[r,L,U,S]);var q=function(){var e=Object(b.a)(d.a.mark((function e(a,n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(""),e.next=3,O.a.delete("".concat("https://readers-backend.herokuapp.com","/user/").concat(a),{headers:{authorization:"Bearer "+t}});case 3:"delete"==(s=e.sent).data&&i(r),200===s.status&&u.push("/SignUp");case 6:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),K=Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"userup",children:[Object(x.jsx)("label",{htmlFor:"",children:"Name"}),Object(x.jsx)("input",{type:"text",value:p,onChange:function(e){!function(e){m(e.target.value)}(e)}}),Object(x.jsx)("label",{htmlFor:"",children:"image"}),Object(x.jsx)("input",{type:"file",onChange:function(e){!function(e){e.target.files[0]&&y(e.target.files[0])}(e)}}),Object(x.jsx)("button",{onClick:function(){_.ref("images/".concat(S.name)).put(S).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);T(t)}),(function(e){console.log(e)}),(function(){_.ref("images").child(S.name).getDownloadURL().then((function(e){D(e)}))}))},children:"Upload"}),Object(x.jsx)("div",{className:"output"}),Object(x.jsx)("label",{htmlFor:"",children:"Bio"}),Object(x.jsx)("textarea",{name:"",id:"",value:z,cols:"25",rows:"5",onChange:function(e){!function(e){E(e.target.value)}(e)}}),Object(x.jsx)("button",{onClick:function(){!function(){var e=O.a.put("".concat("https://readers-backend.herokuapp.com","/username"),{newName:p},{headers:{authorization:"Bearer "+t}});m(e.data)}(),function(){var e=O.a.put("".concat("https://readers-backend.herokuapp.com","/userbio"),{newBio:z},{headers:{authorization:"Bearer "+t}});E(e.data)}(),function(){var e=O.a.put("".concat("https://readers-backend.herokuapp.com","/userimage"),{newImg:L},{headers:{authorization:"Bearer "+t}});y(e.data)}(),J(!1)},children:"Save"})]})});return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"user",children:[Object(x.jsx)("img",{className:"profileImg",src:r.img,alt:""}),Object(x.jsx)("h1",{children:r.name}),Object(x.jsx)("h1",{children:r.bio}),Object(x.jsx)("h1",{children:r.admin}),Object(x.jsxs)("div",{className:"buttons",children:[Object(x.jsx)("button",{className:"del",onClick:function(){q()},children:"Delete profile"}),Object(x.jsx)("button",{className:"up",onClick:function(){J(!F)},children:"Update profile"}),F?K:""]})]})})}Object(s.render)(Object(x.jsx)(L,{}),document.querySelector("#root"));c(320);function D(e){var t=e.token,c=Object(a.useState)([]),n=Object(o.a)(c,2),s=(n[0],n[1]),r=Object(a.useState)(""),i=Object(o.a)(r,2),u=i[0],l=i[1],h=Object(a.useState)(""),p=Object(o.a)(h,2),m=p[0],f=p[1],v=Object(a.useState)(""),g=Object(o.a)(v,2),k=g[0],N=g[1],w=Object(a.useState)(""),S=Object(o.a)(w,2),y=S[0],C=S[1],B=Object(a.useState)(0),z=Object(o.a)(B,2),E=z[0],I=z[1],R=Object(a.useState)(""),_=Object(o.a)(R,2),L=_[0],D=_[1],A=Object(j.e)(),H=Object(a.useState)([]),U=Object(o.a)(H,2),T=U[0],M=U[1],P=function(){var e=Object(b.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u||m||k||y){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,O.a.post("".concat("https://readers-backend.herokuapp.com","/addbook"),{name:u,auther:m,img:k,description:y,rating:E,url:L},{headers:{authorization:"Bearer "+t}});case 4:c=e.sent,s(c.data),201===c.status&&A.push("/books");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){O.a.get("".concat("https://readers-backend.herokuapp.com","/getUsers"),{headers:{authorization:"Bearer "+t}}).then((function(e){M(e.data)})).catch((function(e){console.log(e)}))}),[T]),Object(x.jsxs)("div",{className:"wholee",children:[Object(x.jsxs)("div",{className:"users",children:[Object(x.jsx)("h2",{children:"Users"}),T&&T.map((function(e,t){return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"usersInfo",children:[Object(x.jsx)("img",{className:"imgs",src:e.img,alt:""}),Object(x.jsx)("h3",{className:"username",children:e.name})," ",Object(x.jsx)("br",{}),Object(x.jsxs)("p",{className:"join",children:["Joined ",e.time]})]})})}))]}),Object(x.jsxs)("div",{className:"formbox",children:[Object(x.jsx)("h1",{children:"add book"}),Object(x.jsxs)("form",{id:"form",children:[Object(x.jsx)("label",{for:"",children:"Name"}),Object(x.jsx)("input",{type:"text",className:"asd",placeholder:"name",onChange:function(e){!function(e){l(e.target.value)}(e)}}),Object(x.jsx)("label",{for:"",children:"Auther"}),Object(x.jsx)("input",{type:"text",className:"asd",placeholder:"auther",onChange:function(e){!function(e){f(e.target.value)}(e)}}),Object(x.jsx)("label",{for:"",children:"Image"}),Object(x.jsx)("input",{type:"text",className:"asd",placeholder:"img",onChange:function(e){!function(e){N(e.target.value)}(e)}}),Object(x.jsx)("label",{for:"",children:"description"}),Object(x.jsx)("textarea",{name:"",className:"asd",placeholder:"description",onChange:function(e){!function(e){C(e.target.value)}(e)},id:"",cols:"30",rows:"10"}),Object(x.jsx)("label",{for:"",children:"Link"}),Object(x.jsx)("input",{type:"text",className:"asd",placeholder:"book link",onChange:function(e){!function(e){D(e.target.value)}(e)}}),Object(x.jsx)("label",{for:"",children:"Rating"}),Object(x.jsxs)("select",{id:"cars",name:"cars",onChange:function(e){!function(e){I(e.target.value)}(e)},children:[Object(x.jsx)("option",{value:"0",children:"Rate:"}),Object(x.jsx)("option",{children:"1"}),Object(x.jsx)("option",{children:"2"}),Object(x.jsx)("option",{children:"3"}),Object(x.jsx)("option",{children:"4"}),Object(x.jsx)("option",{children:"5"})]})," ",Object(x.jsx)("br",{}),Object(x.jsx)("button",{type:"button",id:"btn",className:"button",onClick:function(){P()},children:"Add"})]})]})]})}var A=c(253),H=c(252),U=(c(491),A.a.connect("".concat("https://readers-backend.herokuapp.com"),{transports:["websocket"]})),T="";function M(e){var t=e.token,c=Object(a.useState)(""),n=Object(o.a)(c,2),s=n[0],r=n[1],i=Object(a.useState)(""),l=Object(o.a)(i,2),h=l[0],p=l[1],m=Object(a.useState)([]),f=Object(o.a)(m,2),v=f[0],g=f[1],k=Object(j.f)(),N=k.id,w=(k.name,Object(a.useState)("")),S=Object(o.a)(w,2),y=S[0];S[1];Object(a.useEffect)((function(){N>y?T=N+y:T=y+N;var e=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(T,"inget"),e.next=3,O.a.get("".concat("https://readers-backend.herokuapp.com","/getChat/").concat(T));case 3:t=e.sent,g(t.data.chatArr);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();console.log(T,"room"),""!==T&&U.emit("join_room",T)}),[]),Object(a.useEffect)((function(){O.a.get("".concat("https://readers-backend.herokuapp.com","/user"),{headers:{authorization:"Bearer "+t}}).then((function(e){r(e.data.name)})).catch((function(e){console.log(e)}))}),[]);var C=function(){var e=Object(b.a)(d.a.mark((function e(){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===h){e.next=11;break}return c={room:T,userName:s,message:h,time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()},e.next=4,O.a.post("".concat("https://readers-backend.herokuapp.com","/saveChat"),{room:T,userName:s,message:h,recipient:N,time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()},{headers:{authorization:"Bearer ".concat(t)}});case 4:return a=e.sent,console.log(a.data),console.log(a.data.chatArr),e.next=9,U.emit("send_message",c);case 9:g([].concat(Object(u.a)(v),[c])),p("");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){U.on("receive_message",(function(e){g((function(t){return[].concat(Object(u.a)(t),[e])}))}))}),[U]),Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)("div",{className:"chat-window",children:[Object(x.jsx)("div",{className:"chat-header",children:Object(x.jsx)("p",{children:"discussion"})}),Object(x.jsx)("div",{className:"chat-body",children:Object(x.jsx)(H.a,{className:"message-container",children:v.map((function(e){return Object(x.jsx)("div",{className:"message",id:s===e.userName||y===e.userId?"you":"other",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"message-content",children:Object(x.jsx)("p",{children:e.message})}),Object(x.jsxs)("div",{className:"message-meta",children:[Object(x.jsx)("p",{id:"time",children:e.time}),Object(x.jsx)("p",{id:"author",children:e.userName})]})]})})}))})}),Object(x.jsxs)("div",{className:"chat-footer",children:[Object(x.jsx)("input",{type:"text",value:h,placeholder:"Sand Message...",onChange:function(e){p(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&C()}}),Object(x.jsx)("button",{onClick:C,children:"\u25ba"})]})]})})}c(492);function P(e){var t=e.token,c=Object(a.useState)(null),n=Object(o.a)(c,2),s=n[0],r=n[1],i=Object(j.e)(),u=Object(j.f)().id;Object(a.useEffect)((function(){O.a.get("".concat("https://readers-backend.herokuapp.com","/getOneUser/").concat(u),{headers:{authorization:"Bearer "+t}}).then((function(e){r(e.data)})).catch((function(e){console.log(e)}))}),[s]);return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"user profile"}),s?Object(x.jsxs)("div",{className:"users",children:[Object(x.jsx)("img",{className:"userImg",src:s.img,alt:""}),Object(x.jsx)("h3",{children:s.name}),Object(x.jsx)("button",{onClick:function(){!function(e,t){i.push("/Chat/".concat(e))}(s._id)},children:"chat "})]}):""]})}c(493).config();var F=function(){console.log("https://readers-backend.herokuapp.com","backend url");var e=Object(a.useState)((function(){var e=localStorage.getItem("token");return JSON.parse(e)})),t=Object(o.a)(e,2),c=t[0],n=t[1];return Object(a.useEffect)((function(){localStorage.setItem("token",JSON.stringify(c))}),[c]),Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(i.a,{children:[Object(x.jsx)(y,{token:c,setToken:n}),Object(x.jsx)(j.a,{exact:!0,path:"/",render:function(){return Object(x.jsx)(v,{token:c,setToken:n})}}),Object(x.jsx)(j.a,{exact:!0,path:"/Books",render:function(){return Object(x.jsx)(k,{token:c})}}),Object(x.jsx)(j.a,{exact:!0,path:"/Favorite",render:function(){return Object(x.jsx)(N,{token:c})}}),Object(x.jsx)(j.a,{exact:!0,path:"/login",render:function(){return Object(x.jsx)(w,{setToken:n})}}),Object(x.jsx)(j.a,{exact:!0,path:"/SignUp",component:C}),Object(x.jsx)(j.a,{exact:!0,path:"/OneBook",render:function(){return Object(x.jsx)(E,{token:c})}}),Object(x.jsx)(j.a,{path:"/book/:id",render:function(){return Object(x.jsx)(E,{token:c})}}),Object(x.jsx)(j.a,{path:"/Profile",render:function(){return Object(x.jsx)(L,{token:c,setToken:n})}}),Object(x.jsx)(j.a,{exact:!0,path:"/AddBook",render:function(){return Object(x.jsx)(D,{token:c})}}),Object(x.jsx)(j.a,{exact:!0,path:"/Chat/:id/:name",render:function(){return Object(x.jsx)(M,{token:c})}}),Object(x.jsx)(j.a,{exact:!0,path:"/UserProfile/:id/:name",render:function(){return Object(x.jsx)(P,{token:c})}})]})})};r.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(i.a,{children:Object(x.jsx)(F,{})})}),document.getElementById("root"))}},[[497,1,2]]]);
//# sourceMappingURL=main.bcfb82fc.chunk.js.map